<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>DOM Demo</title>
        <link rel="icon" href="favicon.ico">
        <link rel="stylesheet" href="css/site.css">
    </head>
    <body>
        <main>
            <h1>Welcome to the DOM Demo</h1>
            <!-- <p id="first-paragraph">
                Lorem ipsum dolor sit amet consectetur adipisicing elit. Consectetur culpa 
                delectus hic fuga voluptatibus commodi aspernatur eaque vero, aut deserunt.
            </p>
            <p id="second-paragraph" class="support-paragraph">
                Lorem ipsum dolor, sit amet consectetur adipisicing elit. Accusamus et, 
                accusantium fugiat voluptatibus culpa architecto?
            </p>
            <p id="third-paragraph" class="support-paragraph">
                Lorem ipsum, dolor sit amet consectetur adipisicing elit. Sunt distinctio porro 
                vero accusantium impedit laborum blanditiis ratione vitae provident autem.
            </p> -->
            <div id="list-section">
                <a id="add-to-list" href="#">Add New Element To List</a>
                <ul id="key-items">
                    <li>Our First LI</li>
                    <li>Our Second LI</li>
                    <li>Our Third LI</li>
                </ul>
            </div>
            <div>
                <h2 id="display-message">Send Email Demo</h2>
                <p id="status-message"></p>
                <a id="send-email" href="#">Send Email with Mistake</a><br>
                <a id="recall-email" href="#">Recall Email</a>
            </div>
        </main>
        <script>
            'use strict';

            const list = document.getElementById('key-items');
            let i = 4;
            const addAction = document.getElementById('add-to-list');
            const displayMessage = document.getElementById('display-message');
            let timeoutId = 0;
            const sendEmailAnchor = document.getElementById('send-email');
            const cancelEmailAnchor = document.getElementById('recall-email');
            const statusMessage = document.getElementById('status-message');
            let countDown = 10;

            sendEmailAnchor.addEventListener('click', sendEmail);
            cancelEmailAnchor.addEventListener('click', cancelEmail);

            // addAction.addEventListener('click', (e) => {
            //     e.preventDefault();
            //     const fragment = new DocumentFragment()
            //     const li = document.createElement('li');
            //     li.innerText = `LI From anchor tag #${i}`;
            //     li.classList.add('new-item');
            //     i++;
            //     fragment.appendChild(li);
            //     list.appendChild(fragment);
            //     setTimeout(removeNewItemClass, 2000, li);
            // });

            // function removeNewItemClass(item) {
            //     // const items = list.querySelectorAll('.new-item');
            //     // const itemsArray = Array.from(items);
            //     // itemsArray.forEach(element => element.classList.remove('new-item'));
            //     item.classList.remove('new-item');
            // }

            function sendEmail(e) {
                e.preventDefault();
                timeoutId = setTimeout(countDownToSend);
            }

            function countDownToSend() {
                if (countDown > 0) {
                    statusMessage.innerText = `Email will send in ${countDown} seconds...`;
                    timeoutId = setTimeout(countDownToSend, 1000);
                    countDown--;
                } else {
                    actuallSendEmail();
                    countDown = 10;
                }
            }

            function cancelEmail(e) {
                e.preventDefault();
                clearTimeout(timeoutId);
                cancelSendEmail();
            }

            function actuallSendEmail() {
                displayMessage.innerText = 'The email has been sent!!!!!';
                statusMessage.innerText = '';
            }

            function cancelSendEmail() {
                displayMessage.innerText = 'The email has been recalled!';
                statusMessage.innerText = '';
            }
        </script>
    </body>
</html>